<table class='transactions-table'>

  <tbody>
    <% for transaction in @transactions %>
      <tr>
        <td class='col1'><%= transaction.tag.name %></td>
        <td class='col2'><%= transaction.merchant.name %></td>
        <td class='col3'><%= transaction.date %></td>
        <td align='right'><a class='actions' href='/transactions/<%= transaction.id %>/edit'>Edit</a></td>
        <td class='col4' align='right'>- £<%= sprintf('%.2f', transaction.amount) %></td>
      </tr>
    <% end %>
  </tbody>

  <tfoot>
    <tr>
      <td colspan='4'>
      <div class='filter-wrapper'>

      <a class='add-button' href='/transactions/new'>+</a>
        
      <a class='add-button' href='/transactions/sort-by-date'>s</a>
      

      <form class='filter' action='/transactions/merchants' method='GET'>
          <select name='merchant_id' required>
            <option value='' hidden>Filter by Merchant</option>
            <% for merchant in @merchants %>
            <option value='<%= merchant.id %>'><%= merchant.name %></option>
            <% end %>
          </select>
          <input type='submit' value='Filter' />
        </form>

        <form class='filter' action='/transactions/tags' method='GET'>
          <select name='tag_id' required>
            <option value='' hidden>Filter by Tag</option>
            <% for tag in @tags %>
            <option value='<%= tag.id %>'><%= tag.name %></option>
            <% end %>
          </select>
          <input type='submit' value='Filter' />
        </form>

      </div>
      </td>

      <td align='right'>TOTAL: - £<%= sprintf('%.2f', @total) %></td>
    </tr>
  </tfoot>

</table>

